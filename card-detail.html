<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-6">
                <img id="movie-image" src="" alt="Movie Image" class="img-fluid">
            </div>
            <div class="col-md-6">
                <h1 id="movie-title"></h1>
                <p><strong>Thể loại:</strong> <span id="movie-type"></span></p>
                <p><strong>Thời lượng:</strong> <span id="movie-length"></span></p>
                <p><strong>Ngày khởi chiếu:</strong> <span id="movie-start-time"></span></p>
                <p><strong>Tóm tắt phim:</strong></p>
                <p id="movie-description"></p>
            </div>
        </div>
    </div>

    
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            // Get the movie ID from the URL (e.g., ?id=1)
            const urlParams = new URLSearchParams(window.location.search);
            const movieId = urlParams.get('id');

            // Check if the movie ID is provided
            if (!movieId) {
                $('body').html('<h1>Movie ID is missing</h1>');
                return;
            }

            // Fetch the JSON data
            $.getJSON('./data/card.json', function (cardData) {
                // Find the movie that matches the provided ID
                const movie = cardData.find(card => card.id.toString() === movieId);

                if (movie) {
                    // Populate the movie details
                    $('#movie-image').attr('src', movie.imageUrl || 'default-image.jpg');
                    $('#movie-title').text(movie.name || 'Untitled');
                    $('#movie-type').text(movie.type || 'N/A');
                    $('#movie-length').text(movie.length || 'N/A');
                    $('#movie-start-time').text(movie.startDate || 'N/A');
                    $('#movie-description').text(movie.description || 'No description available.');
                } else {
                    // If the movie is not found
                    $('body').html('<h1>Movie not found</h1>');
                }
            }).fail(function () {
                $('body').html('<h1>Failed to load movie data</h1>');
                console.error("Failed to load ./data/card.json");
            });

            // Load Navbar
            $.get("./components/navbar.html", function (navbarHtml) {
                $('body').prepend(navbarHtml);
            }).fail(function () {
                console.error("Failed to load ./components/navbar.html");
            });

            // Load Footer
            $.get("./components/footer.html", function (footerHtml) {
                $('body').append(footerHtml);
            }).fail(function () {
                console.error("Failed to load footer.html");
            });
        });
    </script>
</body>
</html>
